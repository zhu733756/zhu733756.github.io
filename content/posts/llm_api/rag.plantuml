@startuml
actor 用户界面 as UI
participant RAG as "RAG"
participant 知识库 as "知识库"
participant 向量存储 as "向量存储知识库"
participant 实时爬虫 as "实时爬虫"
participant 关系知识库 as "关系知识库"
participant OneAPI as "One API"
participant LLM生成模块 as "LLM生成模块"

UI -> RAG: 发起请求
activate RAG
RAG -> 知识库: 请求检索相关信息
activate 知识库
知识库 -> 向量存储: 查询相关文档向量
activate 向量存储
向量存储 --> 知识库: 返回相关文档向量
deactivate 向量存储
知识库 -> 实时爬虫: 请求实时信息（如果需要）
activate 实时爬虫
实时爬虫 --> 知识库: 返回实时信息
deactivate 实时爬虫
知识库 -> 关系知识库: 查询关系信息（如果需要）
activate 关系知识库
关系知识库 --> 知识库: 返回关系信息
deactivate 关系知识库
deactivate 知识库
RAG -> OneAPI: 请求llm生成响应
activate OneAPI
OneAPI -> LLM生成模块: 发送查询和检索结果
activate LLM生成模块
LLM生成模块 -> LLM生成模块: 使用LLM生成响应
LLM生成模块 --> OneAPI: 返回生成的响应
deactivate LLM生成模块
OneAPI --> RAG: 显示响应
deactivate OneAPI
RAG --> UI: 显示响应
deactivate RAG
@enduml