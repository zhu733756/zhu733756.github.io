<script id="comment-block"
        src="https://giscus.app/client.js"
        data-repo="zhu733756/zhu733756.github.io"
        data-repo-id="R_kgDONSpW1A"
        data-category="Announcements"
        data-category-id="DIC_kwDONSpW1M4Ckfxg"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

<script>
    const sendMessageToGiscus = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
    }

    const changeGiscusTheme = (theme) => {
        sendMessageToGiscus({
            setConfig: {
                theme: theme
            }
        });
    }

    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.attributeName === "class") {
                const body = mutation.target
                if (body.className.includes("dark")) {
                    changeGiscusTheme("dark")
                } else {
                    changeGiscusTheme("light")
                }
            }
        });
    });

    observer.observe(document.body, { attributes: true });
</script>